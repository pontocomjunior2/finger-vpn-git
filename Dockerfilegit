# Dockerfile otimizado para deploy GitHub via EasyPanel
# Usar uma imagem base Python 3.11 slim baseada no Debian Bookworm
FROM python:3.11-slim-bookworm

# Instalar dependências do sistema: ffmpeg (essencial) e ca-certificates (para HTTPS)
# Limpar cache do apt para reduzir o tamanho da imagem
RUN apt-get update && \
    apt-get install -y --no-install-recommends ffmpeg ca-certificates && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Definir o diretório de trabalho dentro do container
WORKDIR /app

# Copiar apenas o arquivo de dependências primeiro para aproveitar o cache do Docker
COPY app/requirements.txt .

# Instalar as dependências Python
# --no-cache-dir reduz o tamanho da imagem
# --upgrade pip